<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>砖 转 '!</title>
</head>

<body>

  <h1>砖 转 '</h1>
  <input type="button" value="转转 砖拽" id="n1">
  <div id="dt"> <input type="checkbox" value="专" id="t123"> 专</div>

  <div id="d1"></div>

  <div id="d2"></div>

  <div id="d3"></div>
  <div id="d5"></div>
  <div id="d4"></div>

  <script>

    let arr_t = [];
    let arr_f = [];
    let sum = 0;
    let t;
    let flag;
    let tt;
    //  爪 注 驻转专 转转 砖拽
    document.getElementById("n1").addEventListener("click", start);

    // 驻拽爪转 转转 砖拽
    function start() {
      sum = 0;

      // 住专转 驻转专 转
      document.body.removeChild(document.getElementById("n1"));


      // 住驻转 转专转 砖
      let y1 = " 住 拽?";
      let t1 = document.createTextNode(y1);
      let x1 = document.createElement("h2");
      x1.appendChild(t1);
      document.getElementById("d1").appendChild(x1);
      x1.setAttribute("id", "text1");
      x1.classList.add("caption");

      // 住驻转 转专转 砖 住驻转
      let y3 = "专专 拽 专拽 转 驻爪 砖转  转 住驻专!";
      let t3 = document.createTextNode(y3);
      let x3 = document.createElement("h3");
      x3.appendChild(t3);
      document.getElementById("d1").appendChild(x3);
      x3.setAttribute("id", "text3");
      x3.classList.add("caption");
      // 住驻转 注 注 拽
      let y2 = "住驻专 拽转 砖 : "
      let t2 = document.createTextNode(y2 + sum);
      let x2 = document.createElement("h3");
      x2.appendChild(t2);
      document.getElementById("d3").appendChild(x2);
      x2.setAttribute("id", "text2");
      x2.classList.add("caption");


      // 住驻转 专 专拽  住 转转 专

      let checkBox = document.getElementById("t123");
      if (checkBox.checked == true) {
        document.getElementById("d5").innerText = 20;
        document.getElementById("d5").classList.add("caption");
        tt = setInterval("timer()", 1000);
        document.body.removeChild(document.getElementById("dt"));
        flag = 1;
      }
      else {
        document.body.removeChild(document.getElementById("dt"));
        document.getElementById("d5").classList.add("caption");
        flag = 0;
      }


      // 住驻转 转转 拽
      let img = document.createElement("img");
      img.src = '拽.png';
      img.setAttribute("id", "m");
      document.getElementById("d2").appendChild(img);
      img.classList.add("caption");


      // 住驻转 转转 砖  驻爪
      let img1 = document.createElement("img");
      img1.src = '.jpg';
      img1.setAttribute("id", "m1");
      img1.classList.add("img-f");
      document.getElementById("d1").appendChild(img1);
      arr_f.push(img1);


      let img2 = document.createElement("img");
      img2.src = '拽拽.png';
      img2.setAttribute("id", "m2");
      img2.classList.add("img-t");
      document.getElementById("d1").appendChild(img2);
      arr_t.push(img2);

      let img3 = document.createElement("img");
      img3.src = '.png';
      img3.setAttribute("id", "m3");
      img3.classList.add("img-f");
      document.getElementById("d1").appendChild(img3);
      arr_f.push(img3);

      let img4 = document.createElement("img");
      img4.src = '专.png';
      img4.setAttribute("id", "m4");
      img4.classList.add("img-f");
      document.getElementById("d1").appendChild(img4);
      arr_f.push(img4);

      let img5 = document.createElement("img");
      img5.src = '.png';
      img5.setAttribute("id", "m5");
      img5.classList.add("img-f");
      document.getElementById("d1").appendChild(img5);
      arr_f.push(img5);

      let img6 = document.createElement("img");
      img6.src = '转.png';
      img6.setAttribute("id", "m6");
      img6.classList.add("img-t");
      document.getElementById("d1").appendChild(img6);
      arr_t.push(img6);
      arr_f.splice(4, 1);

      let img7 = document.createElement("img");
      img7.src = '专转.png';
      img7.setAttribute("id", "m7");
      img7.classList.add("img-t");
      img7.draggable = true;
      img7.addEventListener("dragstart", dragStart);
      document.getElementById("d1").appendChild(img7);
      arr_t.push(img7);

      let img8 = document.createElement("img");
      img8.src = '砖专 转.png';
      img8.setAttribute("id", "m8");
      img8.classList.add("img-t");
      img8.draggable = true;
      img8.addEventListener("dragstart", dragStart);
      document.getElementById("d1").appendChild(img8);
      arr_t.push(img8);

      let img9 = document.createElement("img");
      img9.src = '住驻专.png';
      img9.setAttribute("id", "m9");
      img9.classList.add("img-t");
      img9.draggable = true;
      img9.addEventListener("dragstart", dragStart);
      document.getElementById("d1").appendChild(img9);
      arr_t.push(img9);

      let img10 = document.createElement("img");
      img10.src = '拽专.png';
      img10.setAttribute("id", "m10");
      img10.classList.add("img-t");
      img10.draggable = true;
      img10.addEventListener("dragstart", dragStart);
      document.getElementById("d1").appendChild(img10);
      arr_t.push(img10);
      // 驻砖专 专专  转转
      img1.draggable = true;
      img2.draggable = true;
      img3.draggable = true;
      img4.draggable = true;
      img5.draggable = true;
      img6.draggable = true;
      img7.draggable = true;
      img8.draggable = true;
      img9.draggable = true;
      img10.draggable = true;
      img1.addEventListener("dragstart", dragStart);
      img2.addEventListener("dragstart", dragStart);
      img3.addEventListener("dragstart", dragStart);
      img4.addEventListener("dragstart", dragStart);
      img5.addEventListener("dragstart", dragStart);
      img6.addEventListener("dragstart", dragStart);
      img7.addEventListener("dragstart", dragStart);
      img8.addEventListener("dragstart", dragStart);
      img9.addEventListener("dragstart", dragStart);
      img10.addEventListener("dragstart", dragStart);


      // 驻砖专 专专 -
      let d2 = document.getElementById("d2");
      d2.addEventListener("dragover", allowDrop);
      d2.addEventListener("drop", drop);
      function allowDrop(ev) {
        ev.preventDefault();
      }
      function dragStart(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
      }
      let d3 = document.getElementById("d3");
      d3.addEventListener("dragover", allowDrop);
      d3.addEventListener("drop", drop);
      // 驻拽爪转 专专
      function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        var draggedElement = document.getElementById(data);

        // 拽  驻 砖 转 住驻专
        if (draggedElement.classList.contains("img-t")) {
          // 住驻转 拽转
          sum += 10;
          // 转 驻
          let timer, timer2, timer3;
          let imggif;
          addImg();
          timer = setTimeout(removeImg, 3000);
          // 专专转 转
          function addImg() {
            imggif = document.createElement("img");
            imggif.src = '1f44f.gif';
            imggif.setAttribute("id", "mg");
            document.getElementById("d4").appendChild(imggif);
          }
          // 住专转 转  拽
          function removeImg() {
            document.getElementById("d4").removeChild(imggif);
          }
          ev.target.appendChild(draggedElement);
          //  转  转
        } else {
          // 专转 拽
          sum -= 5;
        }
        // 注 拽转 转
        x2.textContent = y2 + sum;
        //拽  砖拽 专 住转
        check();
      }
    }
    // 驻拽爪转 拽
    function check() {
      let validImagesLeft = arr_t.some(function (img) {
        return img.parentNode === document.getElementById("d1");
      });
      //  驻住
      if (sum <= 0) {
        document.getElementById("text2").innerHTML = "砖拽 住转, 住 砖!";
        //  砖 专
        if (flag == 1) {
          // 注爪专转 专
          clearInterval(tt);
          document.getElementById("d5").innerText = " 砖  住 注-   " + (20 - t) + "  砖转!   "

        }
        // 驻注转 驻拽爪转 住专转 转转 转 住驻转 驻转专 砖
        timer2 = setTimeout(removeImages, 3000);
        timer3 = setTimeout(showStartButton, 3000);
        //  爪
      } else if (sum >= 60) {
        document.getElementById("text2").innerHTML = "住转 转 砖拽 爪 专!";
        //  拽 专
        if (flag == 1) {
          // 注爪专 砖 专
          clearInterval(tt);
          document.getElementById("d5").innerText = "  爪转 -   " + (20 - t) + "  砖转!   "

        }
        // 驻注转 驻拽爪转 住专转 转转 转 住驻转 驻转专 砖
        timer3 = setTimeout(showStartButton, 3000);
        timer2 = setTimeout(removeImages, 3000);
        //  住祝 爪 拽转 转  转转 转   驻砖 (砖专 专拽 转转  转)
      } else if (!validImagesLeft) {
        document.getElementById("text2").innerHTML = "住转 转 砖拽 - " + sum + " 拽转!";
        //  拽 专
        if (flag == 1) {
          //  拽 专
          clearInterval(tt);
          document.getElementById("d5").innerText = "  爪转 -   " + (20 - t) + "  砖转!   "
          // 

        }
        // 驻注转 驻拽爪转 住专转 转转 转 住驻转 驻转专 砖
        timer2 = setTimeout(removeImages, 3000);
        timer3 = setTimeout(showStartButton, 3000);
      }
    }
    // 驻拽爪转 住专转 转转 转
    function removeImages() {
      var images = document.querySelectorAll(".img-t, .img-f");
      var captions = document.querySelectorAll(".caption");
      images.forEach(function (image) {
        image.parentNode.removeChild(image);
      });
      captions.forEach(function (caption) {
        caption.parentNode.removeChild(caption);
      });
    }
    // 驻拽爪转 住驻转 驻转专 砖
    function showStartButton() {
      //  住祝 驻转专  ,   专 拽
      let existingButton = document.getElementById("n1");
      if (existingButton) {
        existingButton.parentNode.removeChild(existingButton);
      }

      //  住驻转 转
      let y5 = "  砖拽 砖 砖 砖";
      let t5 = document.createTextNode(y5);
      let x5 = document.createElement("h3");
      x5.appendChild(t5);
      x5.setAttribute("id", "text5");
      x5.classList.add("caption");
      document.body.appendChild(x5);


      //爪专转 驻转专 砖
      var y4 = "专爪 砖拽 砖?";
      var x4 = document.createElement("input");
      x4.setAttribute("type", "button");
      x4.setAttribute("value", y4);
      x4.setAttribute("id", "n10");
      document.body.appendChild(x4);
      document.getElementById("n10").addEventListener("click", () => {
        location.reload();
      });
    }
    // 驻拽爪转 专
    function timer() {
      t = document.getElementById("d5").innerText;

      console.log("timer")
      console.log(document.getElementById("d5"))
      if (t > 1) {

        t -= 1;
        document.getElementById("d5").innerText = t;
      }
      else {
        clearInterval(tt);
      }
    }

  </script>
</body>

</html>